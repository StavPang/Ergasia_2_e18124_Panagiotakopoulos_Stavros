# Ergasia_2_e18124_Panagiotakopoulos_Stavros

Για την υλοποιηση της εργασιας χρησιμοποιηθηκαν τα εξης: flask , docker , postman , python3 Αφου εχουμε εγκαταστησει τα παραπανω κανουμε deploy τo image για πρωτη φορα με την εντολη (sudo) docker run -d -p 27017:27017 --name mongodb mongo:4.0.4 και ξεκιναμε το container με την εντολη (sudo) docker start mongodb
Στη συνεχεια με την εντολη sudo docker exec -it mongodb mongo κανουμε χρηση του mongo shell.Εκει με την εντολη use DSMarket δημιουργουμε την εν λογω βαση.ΜΕτα δημιουργουμε τα 2 collections users products και ξεκιναμε να υλοποιουμε τα endpoints στο app.py αρχειο.

Υλοποιηση 1ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης που στη συγκεκριμενη περιπτψση ειναι το name , password, email για την εγγραφη του χρηστη στο συστημα.Μεσω του if που ακολουθει ελενχουμε αν ειναι μοναδικα και συνεχιζουμε με την καταχωρηση των στοιχειων επιστρεφωντας τα αντιστοιχα μυνηματα.Σε καθε νεο χρηστη προσθετουμε και ενα επιπλεον στοιχειο το category που δηλωνει αν ειναι απλος χρηστης η διαχειρηστης , για καθε περιπτωση εγγραφης με αυτον το τροπο ο χρηστης καταγραφετα ιως απλος χρηστης.

Υλοποιηση 2ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης που στη συγκεκριμενη περιπτψση ειναι το εμαιλ , password για την εισοδο του στο συστημα.Αφου ελενξουμε την υπαρξη μεσω της συνθηκης στο if καλουμε την ειδη υλοποιημενη συναρτηση για την δημιουργια του uuid με ορισμα το username που περνουμε απο τον χρηστη.Ακολουθει εμφανιση των αντιστοιχω μυνηματων.

Υλοποιηση 3ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης τα οποια ειναι το uuid που ελαβε μετα απο την εισοδο του στο συστημα , την μια απο τις τρις επιλογες αναζητησης (ονομα ,κατηγορια ,μοναδικος αριθμος) καθως και το ζητουμενο.Αν υπαρχει το προιον εμφανιζονται ολα τα διαθεσιμα στοιχεια για αυτο και σε περιπτωση που δεν υπαρχει εμφανιζονται αντιστοιχα αποτελεσματα


Υλοποιηση 4ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης τα οποια ειναι το uuid που ελαβε μετα απο την εισοδο του στο συστημα , τον μοναδικο αριθμο του προιοντος καθως κα ιτη ποσοτητα που επιθυμει απο το συγκεκριμενο προιον.Αρχικα ελενχουμε αν υπαρχει το συγκεκριμενο προιον και αν η ποσοτητα που ειναι διαθεσιμη ειναι μεγαλυτερη αυτης που ζηταει ο χρηστης.Στη περιπτωση που αυτα αληθευουν περναμε οαλ τα στοιχεια για το προιον σε λιστα καθως υπολογιζουμε και το κοστος του και το αποιηκευουμε σε αλλη λιστα.Τελος αφαιρουμε τη ποσοτητα που επελεξε ο χρηστης να αγορασει απο το αποθεμα του προιοντος στην βαση και εμφανιζουμε αντιστοιχα μυνηματα.Εδω αξιζει να αναφερουμε οτι οι λιστς ειναι global και αποθηκευουν για καθε χρηστη τα προιοντα που εχει επιλεξει καθως και το συνολικο κοστος που αξιζουν.

Υλοποιηση 5ου endpoint: Υπολογιζωντας εκ νεου το κοστος απο την global list που αποτελει το καλαθι του μαγαζιου εμφανιζονται τα αντιστοιχα αποτελεσμτα δηλαδη οσα προιοντα εχουν προστεθει στο καλαθι καθως και η συνολικη αξια τους.


Υλοποιηση 7ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης τα οποια ειναι το uuid που ελαβε μετα απο την εισοδο του στο συστημα και ο δεκαεξαψηφιος αριθμος της καρτς του.Πραγματοποιειεται ελεγχος για το αν τα ψηφια ειναι 16 και αν ισχυει αυτο τοτε επιστρεφει την αποδειξη αγορας η οποια περιεχει τις λιστες του καλαθιου καθως και το συνολικο κοστος.

Υλοποιηση 8ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης τα οποια ειναι το uuid που ελαβε μετα απο την εισοδο του στο συστημα καθως και το email του.Αφου ελενξουμε οτι το email υπαρχει αρα υπαρχει και ο λογαριασμος του χρηστη προχωραμε σε διαγραφη ολων των στοιχειων του χρηστη επιστρεφωντας τα αντιστοιχα μυνηματα.

Απο εδω και στα εξης endpoionts δικαιωμα προσβασης εχουν οσοι ειναι διαχειριστες και οχι οι απλοι χρηστες.Ετσι σε ολα μεσω της global μεταβλητης propertie κραταμε την κατηγορια του χρηστη οταν κανει login(2ο endpoint) και ελενχουμε αν ειναι ισο με D που εχουμε ορισει να το διαθετουν οσοι ειναι διαχειριστες , οι υπολοιποι χρηστες στη θεση του D εχουν Α.Ενασ διαχειρηστης δεν θα κανει την κλασικη εγγραφη χρηστη διοτι το συστηαμ θα τον αναγνωρισει ως απλο χρηστη , ετσι αν καποιος θελει να συνδεθει με δικαιωματα διαχειρηστη πρεπει να προσθεσει τα στοιχεια του χειροκινητα στη βαση απο το mongo shell και στο field category να βαλει D.

Υλοποιηση 9ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης τα οποια ειναι το uuid που ελαβε μετα απο την εισοδο του στο συστημα , το ονομα του προιοντος , τη κατηγορια που ανηκει , την περιγραφη του , τη ποσοτητα που διατιθεται προς πωληση , την τιμη του και εναν μοναδικο αριθμο.Στη συνεχεια ελενχουμε αν το ονομα και ο μοναδικος αριθμος ειναι μοναδικα στη βαση και ετσι προχωραμε στην εισαγωγη των μπροιοντων στο συστημα , εμφανιζωντας τα αντιστοιχα μηνυματα


Υλοποιηση 10ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης τα οποια ειναι το uuid που ελαβε μετα απο την εισοδο του στο συστημα και ο μοναδικος αριθμος του προιοντος που επιθυμει να διαγραψει.Στη περιπτωση που το προιον υπαρχει στο συστημα διαγραφονται ολα τα στοιχεια σχετικα με αυτο εμφανιζωντας τα καταλληλα μυνηματα.



Υλοποιηση 11ου endpoint: Ξεκιναμε συλλεγωντας τα δεδομενα που δινει ο χρηστης τα οποια ειναι το uuid που ελαβε μετα απο την εισοδο του στο συστημα , το χαρακτηριστικο του προιοντος που επιθυμει να αλλαξει(epilogh) , την αλλαγη που επιθυμει καθως και το μοναδικο αριθμο του προιοντος.Στη περιπτωση που το προιον υπαρχει πραγματοποιειται η αλλγη και επιστρεφεται αναλογο μηνυμα.Σε περιπτωση που το προιον δε βρεθει παλι επιστρεφεται αναλογο μηνυμα.



Για να τρεξει το συγκεκριμενο καποιος χρηστης θα πρεπει να τρεξει το image στο docker και στη συνεχεια να εγκαταστησει το postman ετσι ωστε να μπορει να πραγματοποιει τα requests.Συμπληρωνοντας διπλα απο το link του servr απο το flask το ονομα του καθε endpoint στο Postman καθως και το method που εχει και συμπληρωνοντας τα απαραιτητα στοιχεια που χρειαζονται για να τρεξει το καθε endpoint.




